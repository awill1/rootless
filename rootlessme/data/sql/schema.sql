CREATE TABLE attendingstatustype (idattendingstatustype INT AUTO_INCREMENT, status VARCHAR(45), PRIMARY KEY(idattendingstatustype)) ENGINE = INNODB;
CREATE TABLE events (idevent INT, name VARCHAR(45), date DATE, time TIME, pictureurl VARCHAR(45), description TEXT, url VARCHAR(255), certification VARCHAR(45), createdby VARCHAR(45) NOT NULL, location INT NOT NULL, createdon DATETIME, modifiedon DATETIME, INDEX createdby_idx (createdby), INDEX location_idx (location), PRIMARY KEY(idevent)) ENGINE = INNODB;
CREATE TABLE friendships (travelers_idusers VARCHAR(45), travelers_idusers1 VARCHAR(45), pending TINYINT, initiatedby VARCHAR(45), createdon VARCHAR(45), PRIMARY KEY(travelers_idusers, travelers_idusers1)) ENGINE = INNODB;
CREATE TABLE locations (idlocation INT AUTO_INCREMENT, name VARCHAR(255), street 1 VARCHAR(255), street 2 VARCHAR(255), city VARCHAR(45), state VARCHAR(2), postalcode VARCHAR(45), country VARCHAR(45), latitude FLOAT(18, 2), longitude FLOAT(18, 2), searchstring VARCHAR(255), PRIMARY KEY(idlocation)) ENGINE = INNODB;
CREATE TABLE messagerecipients (messages_idmessages INT, travelers_idtraveler VARCHAR(45), PRIMARY KEY(messages_idmessages, travelers_idtraveler)) ENGINE = INNODB;
CREATE TABLE messages (idmessages INT AUTO_INCREMENT, subject VARCHAR(255), body TEXT, sender VARCHAR(45) NOT NULL, createdon DATETIME, repliedtomessage INT NOT NULL, INDEX sender_idx (sender), PRIMARY KEY(idmessages)) ENGINE = INNODB;
CREATE TABLE negotiation (idnegotiation INT AUTO_INCREMENT, price FLOAT(18, 2), numberofseats INT, date DATE, time TIME, comments TEXT, idseatrequest INT, idnegotiationtype INT NOT NULL, pickuplocation INT NOT NULL, dropofflocation INT NOT NULL, INDEX idnegotiationtype_idx (idnegotiationtype), INDEX pickuplocation_idx (pickuplocation), INDEX dropofflocation_idx (dropofflocation), PRIMARY KEY(idnegotiation, idseatrequest)) ENGINE = INNODB;
CREATE TABLE negotiationtypes (idnegotiationtype INT AUTO_INCREMENT, name VARCHAR(45), isfinal TINYINT, PRIMARY KEY(idnegotiationtype)) ENGINE = INNODB;
CREATE TABLE profiles (idprofile VARCHAR(45), firstname VARCHAR(45), lastname VARCHAR(45), pictureurl VARCHAR(255), pictureurllarge VARCHAR(255), pictureurlmedium VARCHAR(255), pictureurlsmall VARCHAR(255), pictureurltiny VARCHAR(255), address1 VARCHAR(255), address2 VARCHAR(255), city VARCHAR(45), state VARCHAR(45), postalcode VARCHAR(45), country VARCHAR(45), birthday DATE, gender VARCHAR(45), aboutme TEXT, top5 TEXT, wantstotravelto TEXT, music TEXT, movies TEXT, books TEXT, interests TEXT, favoritewebsites TEXT, websiteurl VARCHAR(128), facebookusername VARCHAR(45), twitterusername VARCHAR(45), createdon DATETIME, modifiedon DATETIME, users_username VARCHAR(45) NOT NULL, INDEX users_username_idx (users_username), PRIMARY KEY(idprofile)) ENGINE = INNODB;
CREATE TABLE reviews (ratingid INT AUTO_INCREMENT, reviewer VARCHAR(45) NOT NULL, reviewee VARCHAR(45) NOT NULL, safetyrating TINYINT, friendlinessrating TINYINT, punctualityrating TINYINT, courtesyrating TINYINT, comments TEXT, createdon DATETIME, driverreview TINYINT, passengerreview TINYINT, INDEX reviewer_idx (reviewer), INDEX reviewee_idx (reviewee), PRIMARY KEY(ratingid)) ENGINE = INNODB;
CREATE TABLE rideofferposts (idrideofferpost INT AUTO_INCREMENT, travelers_idusers VARCHAR(45) NOT NULL, price FLOAT(18, 2), numberofseats INT, date DATE, time TIME, comments TEXT, origin INT NOT NULL, destination INT NOT NULL, vehicles_idvehicle INT, INDEX travelers_idusers_idx (travelers_idusers), INDEX origin_idx (origin), INDEX destination_idx (destination), INDEX vehicles_idvehicle_idx (vehicles_idvehicle), PRIMARY KEY(idrideofferpost)) ENGINE = INNODB;
CREATE TABLE seatneededposts (idseatneededpost INT AUTO_INCREMENT, travelers_idusers VARCHAR(45) NOT NULL, price FLOAT(18, 2), numberofseats INT, date DATE, time TIME, comments TEXT, pickuplocation INT NOT NULL, dropofflocation INT NOT NULL, INDEX travelers_idusers_idx (travelers_idusers), INDEX pickuplocation_idx (pickuplocation), INDEX dropofflocation_idx (dropofflocation), PRIMARY KEY(idseatneededpost)) ENGINE = INNODB;
CREATE TABLE seatrequests (idseatrequest INT AUTO_INCREMENT, driverid VARCHAR(45) NOT NULL, passengerid VARCHAR(45) NOT NULL, createdon DATETIME, INDEX driverid_idx (driverid), INDEX passengerid_idx (passengerid), PRIMARY KEY(idseatrequest)) ENGINE = INNODB;
CREATE TABLE securitysettings (idsecuritysettings INT, canemailpromotions TINYINT, canemailpartners TINYINT, users_username VARCHAR(45) NOT NULL, INDEX users_username_idx (users_username), PRIMARY KEY(idsecuritysettings)) ENGINE = INNODB;
CREATE TABLE tags (idtags INT, PRIMARY KEY(idtags)) ENGINE = INNODB;
CREATE TABLE travelers_attending_event (events_idevent INT, travelers_idtraveler VARCHAR(45), status INT NOT NULL, createdon DATETIME, modifiedon DATETIME, INDEX status_idx (status), PRIMARY KEY(events_idevent, travelers_idtraveler)) ENGINE = INNODB;
CREATE TABLE users (username VARCHAR(45), email VARCHAR(45) NOT NULL, encryptedpassword VARCHAR(128) NOT NULL, PRIMARY KEY(username)) ENGINE = INNODB;
CREATE TABLE vehicles (idvehicle INT AUTO_INCREMENT, seatcount INT, gasmilage VARCHAR(45), year VARCHAR(45), make VARCHAR(45), model VARCHAR(45), color VARCHAR(45), licenseplate VARCHAR(45), baggagecount INT, travelers_idusers VARCHAR(45) NOT NULL, createdon DATETIME, comments TEXT, INDEX travelers_idusers_idx (travelers_idusers), PRIMARY KEY(idvehicle)) ENGINE = INNODB;
CREATE TABLE waypoints (rideofferposts_idrideofferpost INT, locations_idlocation INT, sequence INT, PRIMARY KEY(rideofferposts_idrideofferpost, locations_idlocation)) ENGINE = INNODB;
ALTER TABLE events ADD CONSTRAINT events_location_locations_idlocation FOREIGN KEY (location) REFERENCES locations(idlocation);
ALTER TABLE events ADD CONSTRAINT events_createdby_profiles_idprofile FOREIGN KEY (createdby) REFERENCES profiles(idprofile);
ALTER TABLE friendships ADD CONSTRAINT friendships_travelers_idusers_profiles_idprofile FOREIGN KEY (travelers_idusers) REFERENCES profiles(idprofile);
ALTER TABLE friendships ADD CONSTRAINT friendships_travelers_idusers1_profiles_idprofile FOREIGN KEY (travelers_idusers1) REFERENCES profiles(idprofile);
ALTER TABLE messagerecipients ADD CONSTRAINT messagerecipients_travelers_idtraveler_profiles_idprofile FOREIGN KEY (travelers_idtraveler) REFERENCES profiles(idprofile);
ALTER TABLE messagerecipients ADD CONSTRAINT messagerecipients_messages_idmessages_messages_idmessages FOREIGN KEY (messages_idmessages) REFERENCES messages(idmessages);
ALTER TABLE messages ADD CONSTRAINT messages_sender_profiles_idprofile FOREIGN KEY (sender) REFERENCES profiles(idprofile);
ALTER TABLE negotiation ADD CONSTRAINT negotiation_pickuplocation_locations_idlocation FOREIGN KEY (pickuplocation) REFERENCES locations(idlocation);
ALTER TABLE negotiation ADD CONSTRAINT negotiation_idseatrequest_seatrequests_idseatrequest FOREIGN KEY (idseatrequest) REFERENCES seatrequests(idseatrequest);
ALTER TABLE negotiation ADD CONSTRAINT negotiation_idnegotiationtype_negotiationtypes_idnegotiationtype FOREIGN KEY (idnegotiationtype) REFERENCES negotiationtypes(idnegotiationtype);
ALTER TABLE negotiation ADD CONSTRAINT negotiation_dropofflocation_locations_idlocation FOREIGN KEY (dropofflocation) REFERENCES locations(idlocation);
ALTER TABLE profiles ADD CONSTRAINT profiles_users_username_users_username FOREIGN KEY (users_username) REFERENCES users(username);
ALTER TABLE reviews ADD CONSTRAINT reviews_reviewer_profiles_idprofile FOREIGN KEY (reviewer) REFERENCES profiles(idprofile);
ALTER TABLE reviews ADD CONSTRAINT reviews_reviewee_profiles_idprofile FOREIGN KEY (reviewee) REFERENCES profiles(idprofile);
ALTER TABLE rideofferposts ADD CONSTRAINT rideofferposts_vehicles_idvehicle_vehicles_idvehicle FOREIGN KEY (vehicles_idvehicle) REFERENCES vehicles(idvehicle);
ALTER TABLE rideofferposts ADD CONSTRAINT rideofferposts_travelers_idusers_profiles_idprofile FOREIGN KEY (travelers_idusers) REFERENCES profiles(idprofile);
ALTER TABLE rideofferposts ADD CONSTRAINT rideofferposts_origin_locations_idlocation FOREIGN KEY (origin) REFERENCES locations(idlocation);
ALTER TABLE rideofferposts ADD CONSTRAINT rideofferposts_destination_locations_idlocation FOREIGN KEY (destination) REFERENCES locations(idlocation);
ALTER TABLE seatneededposts ADD CONSTRAINT seatneededposts_travelers_idusers_profiles_idprofile FOREIGN KEY (travelers_idusers) REFERENCES profiles(idprofile);
ALTER TABLE seatneededposts ADD CONSTRAINT seatneededposts_pickuplocation_locations_idlocation FOREIGN KEY (pickuplocation) REFERENCES locations(idlocation);
ALTER TABLE seatneededposts ADD CONSTRAINT seatneededposts_dropofflocation_locations_idlocation FOREIGN KEY (dropofflocation) REFERENCES locations(idlocation);
ALTER TABLE seatrequests ADD CONSTRAINT seatrequests_passengerid_profiles_idprofile FOREIGN KEY (passengerid) REFERENCES profiles(idprofile);
ALTER TABLE seatrequests ADD CONSTRAINT seatrequests_driverid_profiles_idprofile FOREIGN KEY (driverid) REFERENCES profiles(idprofile);
ALTER TABLE securitysettings ADD CONSTRAINT securitysettings_users_username_users_username FOREIGN KEY (users_username) REFERENCES users(username);
ALTER TABLE travelers_attending_event ADD CONSTRAINT ttpi FOREIGN KEY (travelers_idtraveler) REFERENCES profiles(idprofile);
ALTER TABLE travelers_attending_event ADD CONSTRAINT tsai FOREIGN KEY (status) REFERENCES attendingstatustype(idattendingstatustype);
ALTER TABLE travelers_attending_event ADD CONSTRAINT travelers_attending_event_events_idevent_events_idevent FOREIGN KEY (events_idevent) REFERENCES events(idevent);
ALTER TABLE vehicles ADD CONSTRAINT vehicles_travelers_idusers_profiles_idprofile FOREIGN KEY (travelers_idusers) REFERENCES profiles(idprofile);
ALTER TABLE waypoints ADD CONSTRAINT wrri FOREIGN KEY (rideofferposts_idrideofferpost) REFERENCES rideofferposts(idrideofferpost);
ALTER TABLE waypoints ADD CONSTRAINT waypoints_locations_idlocation_locations_idlocation FOREIGN KEY (locations_idlocation) REFERENCES locations(idlocation);
