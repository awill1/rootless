(function(d){function m(){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}d.fn.ajaxSubmit=function(a){function g(b){function i(){var a=j.attr("target"),b=j.attr("action");c.setAttribute("target",k);"POST"!=c.getAttribute("method")&&c.setAttribute("method","POST");c.getAttribute("action")!=e.url&&c.setAttribute("action",e.url);e.skipEncodingOverride||j.attr({encoding:"multipart/form-data",
enctype:"multipart/form-data"});e.timeout&&(s=setTimeout(function(){p=!0;g(!0)},e.timeout));var f=[];try{if(e.extraData)for(var h in e.extraData)f.push(d('<input type="hidden" name="'+h+'" value="'+e.extraData[h]+'" />').appendTo(c)[0]);e.iframeTarget||(o.appendTo("body"),n.attachEvent?n.attachEvent("onload",g):n.addEventListener("load",g,!1));c.submit()}finally{c.setAttribute("action",b),a?c.setAttribute("target",a):j.removeAttr("target"),d(f).remove()}}function g(a){if(!h.aborted&&!t)if(!0===a&&
h)h.abort("timeout");else if((a=n.contentWindow?n.contentWindow.document:n.contentDocument?n.contentDocument:n.document)&&a.location.href!=e.iframeSrc||p){n.detachEvent?n.detachEvent("onload",g):n.removeEventListener("load",g,!1);var b="success",c;try{if(p)throw"timeout";var f="xml"==e.dataType||a.XMLDocument||d.isXMLDoc(a);m("isXml="+f);if(!f&&(window.opera&&(null==a.body||""==a.body.innerHTML))&&--x){m("requeing onLoad callback, DOM not available");setTimeout(g,250);return}var i=a.body?a.body:a.documentElement;
h.responseText=i?i.innerHTML:null;h.responseXML=a.XMLDocument?a.XMLDocument:a;f&&(e.dataType="xml");h.getResponseHeader=function(a){return{"content-type":e.dataType}[a]};i&&(h.status=Number(i.getAttribute("status"))||h.status,h.statusText=i.getAttribute("statusText")||h.statusText);var j=/(json|script|text)/.test((e.dataType||"").toLowerCase());if(j||e.textarea){var k=a.getElementsByTagName("textarea")[0];if(k)h.responseText=k.value,h.status=Number(k.getAttribute("status"))||h.status,h.statusText=
k.getAttribute("statusText")||h.statusText;else if(j){var q=a.getElementsByTagName("pre")[0],r=a.getElementsByTagName("body")[0];q?h.responseText=q.textContent?q.textContent:q.innerHTML:r&&(h.responseText=r.innerHTML)}}else"xml"==e.dataType&&(!h.responseXML&&null!=h.responseText)&&(h.responseXML=y(h.responseText));try{u=z(h,e.dataType,e)}catch(w){b="parsererror",h.error=c=w||b}}catch(v){m("error caught",v),b="error",h.error=c=v||b}h.aborted&&(m("upload aborted"),b=null);h.status&&(b=200<=h.status&&
300>h.status||304===h.status?"success":"error");"success"===b?(e.success&&e.success.call(e.context,u,"success",h),l&&d.event.trigger("ajaxSuccess",[h,e])):b&&(void 0==c&&(c=h.statusText),e.error&&e.error.call(e.context,h,b,c),l&&d.event.trigger("ajaxError",[h,e,c]));l&&d.event.trigger("ajaxComplete",[h,e]);l&&!--d.active&&d.event.trigger("ajaxStop");e.complete&&e.complete.call(e.context,h,b);t=!0;e.timeout&&clearTimeout(s);setTimeout(function(){e.iframeTarget||o.remove();h.responseXML=null},100)}}
var c=j[0],f,e,l,k,o,n,h,p,s;if(b)for(f=0;f<b.length;f++)d(c[b[f].name]).attr("disabled",!1);if(d(":input[name=submit],:input[id=submit]",c).length)alert('Error: Form elements must not have name or id of "submit".');else if(e=d.extend(!0,{},d.ajaxSettings,a),e.context=e.context||e,k="jqFormIO"+(new Date).getTime(),e.iframeTarget?(o=d(e.iframeTarget),f=o.attr("name"),null==f?o.attr("name",k):k=f):(o=d('<iframe name="'+k+'" src="'+e.iframeSrc+'" />'),o.css({position:"absolute",top:"-1000px",left:"-1000px"})),
n=o[0],h={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(a){a=a==="timeout"?"timeout":"aborted";m("aborting upload... "+a);this.aborted=1;o.attr("src",e.iframeSrc);h.error=a;e.error&&e.error.call(e.context,h,a,a);l&&d.event.trigger("ajaxError",[h,e,a]);e.complete&&e.complete.call(e.context,h,a)}},(l=e.global)&&!d.active++&&d.event.trigger("ajaxStart"),l&&d.event.trigger("ajaxSend",
[h,e]),e.beforeSend&&!1===e.beforeSend.call(e.context,h,e))e.global&&d.active--;else if(!h.aborted){if(b=c.clk)if((f=b.name)&&!b.disabled)e.extraData=e.extraData||{},e.extraData[f]=b.value,"image"==b.type&&(e.extraData[f+".x"]=c.clk_x,e.extraData[f+".y"]=c.clk_y);e.forceSync?i():setTimeout(i,10);var u,x=50,t,y=d.parseXML||function(a,b){if(window.ActiveXObject){b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a)}else b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&
b.documentElement.nodeName!="parsererror"?b:null},A=d.parseJSON||function(a){return window.eval("("+a+")")},z=function(a,b,e){var c=a.getResponseHeader("content-type")||"",f=b==="xml"||!b&&c.indexOf("xml")>=0,a=f?a.responseXML:a.responseText;f&&a.documentElement.nodeName==="parsererror"&&d.error&&d.error("parsererror");e&&e.dataFilter&&(a=e.dataFilter(a,b));typeof a==="string"&&(b==="json"||!b&&c.indexOf("json")>=0?a=A(a):(b==="script"||!b&&c.indexOf("javascript")>=0)&&d.globalEval(a));return a}}}
if(!this.length)return m("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof a&&(a={success:a});var c=this.attr("action");(c=(c="string"===typeof c?d.trim(c):"")||window.location.href||"")&&(c=(c.match(/^([^#]+)/)||[])[1]);a=d.extend(!0,{url:c,success:d.ajaxSettings.success,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);c={};this.trigger("form-pre-serialize",[this,a,c]);if(c.veto)return m("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),
this;if(a.beforeSerialize&&!1===a.beforeSerialize(this,a))return m("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var b,i,f=this.formToArray(a.semantic);if(a.data)for(b in a.extraData=a.data,a.data)if(a.data[b]instanceof Array)for(var l in a.data[b])f.push({name:b,value:a.data[b][l]});else i=a.data[b],i=d.isFunction(i)?i():i,f.push({name:b,value:i});if(a.beforeSubmit&&!1===a.beforeSubmit(f,this,a))return m("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",
[f,this,a,c]);if(c.veto)return m("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;b=d.param(f);"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+b,a.data=null):a.data=b;var j=this,k=[];a.resetForm&&k.push(function(){j.resetForm()});a.clearForm&&k.push(function(){j.clearForm()});if(!a.dataType&&a.target){var p=a.success||function(){};k.push(function(b){var c=a.replaceTarget?"replaceWith":"html";d(a.target)[c](b).each(p,arguments)})}else a.success&&k.push(a.success);
a.success=function(b,d,c){for(var f=a.context||a,i=0,e=k.length;i<e;i++)k[i].apply(f,[b,d,c||j,j])};b=0<d("input:file",this).length;l="multipart/form-data"==j.attr("enctype")||"multipart/form-data"==j.attr("encoding");!1!==a.iframe&&(b||a.iframe||l)?a.closeKeepAlive?d.get(a.closeKeepAlive,function(){g(f)}):g(f):d.ajax(a);this.trigger("form-submit-notify",[this,a]);return this};d.fn.ajaxForm=function(a){if(0===this.length){var g=this.selector,c=this.context;if(!d.isReady&&g)return m("DOM not ready, queuing ajaxForm"),
d(function(){d(g,c).ajaxForm(a)}),this;m("terminating; zero elements found by selector"+(d.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(b){b.isDefaultPrevented()||(b.preventDefault(),d(this).ajaxSubmit(a))}).bind("click.form-plugin",function(a){var c=a.target,f=d(c);if(!f.is(":submit,input:image")){c=f.closest(":submit");if(0==c.length)return;c=c[0]}var g=this;g.clk=c;"image"==c.type&&(void 0!=a.offsetX?(g.clk_x=a.offsetX,g.clk_y=a.offsetY):
"function"==typeof d.fn.offset?(f=f.offset(),g.clk_x=a.pageX-f.left,g.clk_y=a.pageY-f.top):(g.clk_x=a.pageX-c.offsetLeft,g.clk_y=a.pageY-c.offsetTop));setTimeout(function(){g.clk=g.clk_x=g.clk_y=null},100)})};d.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};d.fn.formToArray=function(a){var g=[];if(0===this.length)return g;var c=this[0],b=a?c.getElementsByTagName("*"):c.elements;if(!b)return g;var i,f,l,j,k,m;i=0;for(k=b.length;i<k;i++)if(f=b[i],l=f.name)if(a&&
c.clk&&"image"==f.type)!f.disabled&&c.clk==f&&(g.push({name:l,value:d(f).val()}),g.push({name:l+".x",value:c.clk_x},{name:l+".y",value:c.clk_y}));else if((j=d.fieldValue(f,!0))&&j.constructor==Array){f=0;for(m=j.length;f<m;f++)g.push({name:l,value:j[f]})}else null!==j&&"undefined"!=typeof j&&g.push({name:l,value:j});if(!a&&c.clk&&(a=d(c.clk),b=a[0],(l=b.name)&&!b.disabled&&"image"==b.type))g.push({name:l,value:a.val()}),g.push({name:l+".x",value:c.clk_x},{name:l+".y",value:c.clk_y});return g};d.fn.formSerialize=
function(a){return d.param(this.formToArray(a))};d.fn.fieldSerialize=function(a){var g=[];this.each(function(){var c=this.name;if(c){var b=d.fieldValue(this,a);if(b&&b.constructor==Array)for(var i=0,f=b.length;i<f;i++)g.push({name:c,value:b[i]});else null!==b&&"undefined"!=typeof b&&g.push({name:this.name,value:b})}});return d.param(g)};d.fn.fieldValue=function(a){for(var g=[],c=0,b=this.length;c<b;c++){var i=d.fieldValue(this[c],a);null===i||("undefined"==typeof i||i.constructor==Array&&!i.length)||
(i.constructor==Array?d.merge(g,i):g.push(i))}return g};d.fieldValue=function(a,g){var c=a.name,b=a.type,i=a.tagName.toLowerCase();void 0===g&&(g=!0);if(g&&(!c||a.disabled||"reset"==b||"button"==b||("checkbox"==b||"radio"==b)&&!a.checked||("submit"==b||"image"==b)&&a.form&&a.form.clk!=a||"select"==i&&-1==a.selectedIndex))return null;if("select"==i){var f=a.selectedIndex;if(0>f)return null;for(var c=[],i=a.options,l=(b="select-one"==b)?f+1:i.length,f=b?f:0;f<l;f++){var j=i[f];if(j.selected){var k=
j.value;k||(k=j.attributes&&j.attributes.value&&!j.attributes.value.specified?j.text:j.value);if(b)return k;c.push(k)}}return c}return d(a).val()};d.fn.clearForm=function(){return this.each(function(){d("input,select,textarea",this).clearFields()})};d.fn.clearFields=d.fn.clearInputs=function(){return this.each(function(){var a=this.type,d=this.tagName.toLowerCase();"text"==a||"password"==a||"textarea"==d?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==d&&(this.selectedIndex=-1)})};
d.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};d.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};d.fn.selected=function(a){void 0===a&&(a=!0);return this.each(function(){var g=this.type;"checkbox"==g||"radio"==g?this.checked=a:"option"==this.tagName.toLowerCase()&&(g=d(this).parent("select"),a&&(g[0]&&"select-one"==g[0].type)&&g.find("option").selected(!1),
this.selected=a)})}})(jQuery);